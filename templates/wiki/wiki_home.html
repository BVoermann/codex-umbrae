{% extends 'wiki/wiki_base.html' %}

{% block title %}Wiki Übersicht - {{ system.name }}{% endblock %}

{% block content %}
<div class="wiki-home">
    <div class="wiki-stats">
        <div class="stat-card">
            <span class="stat-number">{{ total_entries }}</span>
            <span class="stat-label">Einträge</span>
        </div>
    </div>

    <div class="wiki-sections">
        <section class="wiki-section">
            <h2>Kategorien</h2>
            <div class="category-grid">
                {% for et in entry_types_with_counts %}
                <a href="{% url 'wiki:wiki_by_type' system.slug et.key %}" class="category-card">
                    <span class="category-icon">
                        {% if et.key == 'location' %}&#x1F3F0;{% endif %}
                        {% if et.key == 'npc' %}&#x1F464;{% endif %}
                        {% if et.key == 'player_character' %}&#x2694;{% endif %}
                        {% if et.key == 'item' %}&#x1F48E;{% endif %}
                        {% if et.key == 'faction' %}&#x1F6E1;{% endif %}
                        {% if et.key == 'event' %}&#x1F4DC;{% endif %}
                        {% if et.key == 'creature' %}&#x1F432;{% endif %}
                        {% if et.key == 'deity' %}&#x2728;{% endif %}
                        {% if et.key == 'spell' %}&#x1FA84;{% endif %}
                        {% if et.key == 'other' %}&#x1F4D6;{% endif %}
                    </span>
                    <span class="category-name">{{ et.label }}</span>
                    <span class="category-count">{{ et.count }}</span>
                </a>
                {% endfor %}
            </div>
        </section>

        <div class="wiki-columns">
            <section class="wiki-section">
                <h2>Neueste Einträge</h2>
                {% if recent_entries %}
                <ul class="entry-list">
                    {% for entry in recent_entries %}
                    <li>
                        <a href="{% url 'wiki:wiki_detail' system.slug entry.slug %}">{{ entry.title }}</a>
                        <span class="entry-type">{{ entry.get_entry_type_display }}</span>
                    </li>
                    {% endfor %}
                </ul>
                {% else %}
                <p class="no-entries">Noch keine Einträge vorhanden.</p>
                {% endif %}
            </section>

            <section class="wiki-section">
                <h2>Beliebte Einträge</h2>
                {% if popular_entries %}
                <ul class="entry-list">
                    {% for entry in popular_entries %}
                    <li>
                        <a href="{% url 'wiki:wiki_detail' system.slug entry.slug %}">{{ entry.title }}</a>
                        <span class="entry-views">{{ entry.views }} Aufrufe</span>
                    </li>
                    {% endfor %}
                </ul>
                {% else %}
                <p class="no-entries">Noch keine Einträge vorhanden.</p>
                {% endif %}
            </section>
        </div>
    </div>
</div>
{% endblock %}
